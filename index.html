<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Forest</title>
    <style>
        body {
            overflow: hidden;
            margin: 0;
            padding: 0;
            position: relative;
            height: 100vh;
        }
        #staminaBar {
            position: absolute;
            bottom: 10px;
            left: 10px;
            width: 100px;
            height: 20px;
            background-color: gray;
            border: 1px solid rgb(255, 255, 255);
        }
        #stamina {
            height: 100%;
            background-color: rgb(0, 56, 119);
        }
        #healthBar {
            position: absolute;
            bottom: 10px;
            left: 120px;
            width: 100px;
            height: 20px;
            background-color: red;
            border: 1px solid rgb(255, 255, 255);
        }
        #health {
            height: 100%;
            background-color: rgb(98, 255, 0);
            
        }
        #sanityBar {
            position: absolute;
            bottom: 10px;
            right: 5px;
            width: 100px;
            height: 20px;
            background-color: rgb(58, 58, 58);
            border: 1px solid rgb(255, 255, 255);
        }
        #sanity {
            height: 100%;
            background-color: rgb(190, 174, 35);
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
function resizeRendererToDisplaySize() {
    const canvas = renderer.domElement;
    const width = window.innerWidth;
    const height = window.innerHeight;
    renderer.setSize(width, height, false);
    camera.aspect = width / height;
    camera.updateProjectionMatrix();
}
        
function updateStaminaBar(stamina) {
    const staminaBar = document.getElementById('stamina-bar');
    if (staminaBar) {
        staminaBar.style.width = `${stamina}%`;
    } else {
        console.error('Stamina bar element not found.');
    }
}

function updateHealthBar(health) {
    const healthBar = document.getElementById('health-bar');
    if (healthBar) {
        healthBar.style.width = `${health}%`;
    } else {
        console.error('Health bar element not found.');
    }
}

const keyboard = {};
document.addEventListener('keydown', (event) => {
    keyboard[event.key] = true;
    if (event.key === 'Shift') isSprinting = true;
    if (event.key === 'f') flashlight.visible = !flashlight.visible;
});
document.addEventListener('keyup', (event) => {
    keyboard[event.key] = false;
    if (event.key === 'Shift') isSprinting = false;
});

const mouse = new THREE.Vector2();
const sensitivity = 0.01;
let isPointerLocked = false;

function handleMouseMove(event) {
    if (isPointerLocked) {
        mouse.x += event.movementX * sensitivity;
        mouse.y += event.movementY * sensitivity;
        camera.rotation.x = Math.max(-Math.PI / 2, Math.min(Math.PI / 2, camera.rotation.x + event.movementY * sensitivity));
        camera.rotation.y -= event.movementX * sensitivity;
    }
}

document.addEventListener('mousemove', handleMouseMove);

const canvas = renderer.domElement;

canvas.addEventListener('click', () => canvas.requestPointerLock());

document.addEventListener('pointerlockchange', () => {
    isPointerLocked = document.pointerLockElement === canvas;
    if (isPointerLocked) {
        mouse.set(0, 0);
    }
});
    </script>
</head>
<body>
    <div id="staminaBar">
        <div id="stamina"></div>
    </div>
    <div id="healthBar">
        <div id="health"></div>
    </div>
    <div id="sanityBar">
        <div id="sanity"></div>
    </div>
    <script src='forest-code.js'></script>
</body>
</html>
